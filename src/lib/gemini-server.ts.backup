import { GoogleGenerativeAI } from '@google/generative-ai';

// TEMPORARY: Hardcode your NEW working key
const apiKey = 'AIzaSyDzwMoYHyv9JYbrYIMdP1S70JArTn5MjhI'; // YOUR NEW KEY

console.log('Using hardcoded Gemini key:', apiKey.substring(0, 15) + '...');

export const geminiServer = new GoogleGenerativeAI(apiKey);

export async function callGeminiServer(prompt: string, jsonMode: boolean = true): Promise<string> {
  try {
    const model = geminiServer.getGenerativeModel({ 
      model: 'gemini-1.5-flash-latest',
      generationConfig: {
        temperature: 0.3,
        maxOutputTokens: 2000,
      }
    });

    const result = await model.generateContent(prompt);
    const response = await result.response;
    return response.text();
    
  } catch (error: any) {
    console.error('Gemini error:', error.message);
    throw new Error('AI service temporarily unavailable');
  }
}
